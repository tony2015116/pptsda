<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light">
<script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/3/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>Basic Usage • pptsda</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Basic Usage">
<meta property="og:description" content="pptsda">
<meta property="og:image" content="https://github.com/tony2015116/pptsda/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/3/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/3/darkly/bootstrap.css" media="(prefers-color-scheme: dark)">
<!-- preferably CSS --><link rel="stylesheet" href="../preferably.css">
<link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)">
<script src="../darkswitch.js"></script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pptsda</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/basic-usage.html">Introduction</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
          <a href="#" id="css-toggle-btn">
            <span class="fas fa-adjust fa-lg"></span>
          </a>
        </li>
        
        <li>
  <a href="https://twitter.com/tonyituite" class="external-link">
    <span class="fa fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/tony2015116/pptsda">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
        
        


      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Basic Usage</h1>
            
      
      
      <div class="hidden name"><code>basic-usage.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">pptsda</span><span class="op">)</span></span></code></pre></div>
<!-- WARNING - This vignette is generated by {fusen} from dev/flat_teaching.Rmd: do not edit by hand -->
<!-- 
Run this 'development' chunk

Store every call to library() that you need to run chunks line by line, as in a classical Rmd for analysis
-->
<!--

# Description of your package

This will fill the description of your package.
Fill and run the content of this chunk, before anything else. 

Note: when you will use other flat templates, this part will be in a separate file. Do not be surprised!
-->
<div class="section level2">
<h2 id="import_csv">import_csv<a class="anchor" aria-label="anchor" href="#import_csv"></a>
</h2>
<p>The <code><a href="../reference/import_csv.html">import_csv()</a></code> function allows efficient importing of
multiple CSV files into a single R data object. It takes a vector of
file paths as the main argument, with an optional parameter to specify
the package to use for reading CSVs. Valid options are “data.table”,
“vroom”, and “readr”. By default, data.table::fread is used for fast
parsing. The function handles checking for valid input, loading the
required package, looping through the files, reading each one with the
appropriate CSV reader, and combining the results into a data.table or
data.frame depending on the package used. This provides a convenient
wrapper for batch importing CSVs without needing to write a for loop
each time. To use it, supply a character vector of CSV file paths to the
file_list argument. An optional second argument can choose the CSV
reading package, with “data.table” being the default. The result is a
consolidated data object containing the contents of all CSVs. This
simplifies workflows that involve wrangling multiple CSV files into an
analysis-ready dataset in R. By abstracting away the loop boilerplate,
it allows the user to focus on the analytical tasks instead of data
import details.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">list_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="st">"C:/Users/Dell/Downloads/location301"</span>, pattern <span class="op">=</span> <span class="st">".csv"</span>, full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_csv.html">import_csv</a></span><span class="op">(</span><span class="va">list_csv</span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: data.table</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adg_get">adg_get<a class="anchor" aria-label="anchor" href="#adg_get"></a>
</h2>
<p>The <code><a href="../reference/adg_get.html">adg_get()</a></code> function is used to process raw pig feed
intake data to calculate average daily gain (ADG) and generate growth
curves. It takes the raw data frame as input, cleans invalid records in
multiple steps, runs robust regression to detect outliers, fits simple
linear models to estimate ADG over desired weight ranges, and produces
growth curve plots. The user can specify a weight range to segment the
ADG calculation via the my_break parameter. Outlier detection threshold
and output image save path can also be customized. After processing, it
returns ADG summary info and the analyzed dataset with outlier flags. To
use it, supply the raw data and optionally set parameters like my_break.
It handles data cleaning, analysis and plotting automatically. The
output contains ADG results that can be used for downstream modeling or
evaluation. This provides a streamlined workflow to go from raw feed
intake data to analyzed growth curves and ADG estimates in a single
function call.</p>
<!--
Here is an example on how to use the function.
This should be a reproducible and working example
-->
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nedap_csv_data</span> <span class="op">&lt;-</span> <span class="fu">mintyr</span><span class="fu">::</span><span class="va"><a href="https://tony2015116.github.io/mintyr/reference/nedap.html" class="external-link">nedap</a></span></span>
<span><span class="va">adg_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adg_get.html">adg_get</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">nedap_csv_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• There are no duplicate responders in different locations.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• The removing of weight &lt; 15kg will not delete responder.</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">• Removing records of missing will delete responders: 1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">• Deleted responders: </span></span></span>
<span><span class="co"><span style="color: #BB0000;">#&gt;  c("15964")</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• Running RANSAC Robust Regression:</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• RANSAC Robust Regression succeeded!</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• The outliers detected by Robust model will not delete responder.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• All responders' begin_test_weight are less than or equal to 60kg.</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">• Removing end_test_weight &lt;85kg records will delete responders: 1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">• Deleted responders: </span></span></span>
<span><span class="co"><span style="color: #BB0000;">#&gt;  c("15967")</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• Running Simple Linear Regression</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• Calculate ADG using Simple Linear Regression succeeded!</span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">adg_results</span><span class="op">$</span><span class="va">adg_info</span><span class="op">)</span></span>
<span><span class="co">#&gt; Key: &lt;responder&gt;</span></span>
<span><span class="co">#&gt;    responder location start_date_origin min_weight_origin end_date_origin</span></span>
<span><span class="co">#&gt;       &lt;char&gt;   &lt;char&gt;            &lt;Date&gt;             &lt;num&gt;          &lt;Date&gt;</span></span>
<span><span class="co">#&gt; 1:     13913      101        2024-02-19          21866.22      2024-05-25</span></span>
<span><span class="co">#&gt; 2:     13918      101        2024-02-19          16529.06      2024-05-25</span></span>
<span><span class="co">#&gt; 3:     13935      102        2024-02-19          21414.80      2024-05-25</span></span>
<span><span class="co">#&gt; 4:     13954      101        2024-02-20          30876.24      2024-05-25</span></span>
<span><span class="co">#&gt; 5:     13996      101        2024-02-19          22753.31      2024-05-25</span></span>
<span><span class="co">#&gt; 6:     14260      102        2024-02-19          27757.93      2024-05-25</span></span>
<span><span class="co">#&gt;    max_weight_origin r_squared  lm_slope</span></span>
<span><span class="co">#&gt;                &lt;num&gt;     &lt;num&gt;     &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:          132895.4 0.9914949 1180.5834</span></span>
<span><span class="co">#&gt; 2:          121102.8 0.9917870 1089.6744</span></span>
<span><span class="co">#&gt; 3:          138871.4 0.9976035 1233.5471</span></span>
<span><span class="co">#&gt; 4:          118602.7 0.9781564  941.2985</span></span>
<span><span class="co">#&gt; 5:          142956.6 0.9957625 1281.2277</span></span>
<span><span class="co">#&gt; 6:          142547.7 0.9962627 1221.0429</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adfi_get">adfi_get<a class="anchor" aria-label="anchor" href="#adfi_get"></a>
</h2>
<p>The <code><a href="../reference/adfi_get.html">adfi_get()</a></code> function processes raw pig feed intake
visit data to correct outliers and errors and calculate daily feed
intake (DFI). It takes the raw data and outputs from
<code><a href="../reference/adg_get.html">adg_get()</a></code> as input. It handles data cleaning by flagging
invalid visit data based on predefined rules. Errors are corrected by
redistributing feed intake to valid visits. Final DFI is calculated
after removing errors. The user can optionally specify a weight range to
match the DFI calculation to segmented ADG. Key outputs are DFI summary
info and the analyzed dataset. To use it, supply the raw data and
<code><a href="../reference/adg_get.html">adg_get()</a></code> outputs. It handles error detection, correction,
DFI calculation and matching to ADG segments automatically. The output
contains corrected DFI metrics ready for evaluation. This provides an
automated workflow to go from raw feed intake visit data to analyzed DFI
estimates matched to ADG weight segments in a single function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nedap_csv_data</span> <span class="op">&lt;-</span> <span class="fu">mintyr</span><span class="fu">::</span><span class="va"><a href="https://tony2015116.github.io/mintyr/reference/nedap.html" class="external-link">nedap</a></span></span>
<span><span class="va">adg_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adg_get.html">adg_get</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">nedap_csv_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• There are no duplicate responders in different locations.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• The removing of weight &lt; 15kg will not delete responder.</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">• Removing records of missing will delete responders: 1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">• Deleted responders: </span></span></span>
<span><span class="co"><span style="color: #BB0000;">#&gt;  c("15964")</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• Running RANSAC Robust Regression:</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• RANSAC Robust Regression succeeded!</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• The outliers detected by Robust model will not delete responder.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• All responders' begin_test_weight are less than or equal to 60kg.</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">• Removing end_test_weight &lt;85kg records will delete responders: 1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">• Deleted responders: </span></span></span>
<span><span class="co"><span style="color: #BB0000;">#&gt;  c("15967")</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• Running Simple Linear Regression</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• Calculate ADG using Simple Linear Regression succeeded!</span></span></span>
<span><span class="va">adfi_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adfi_get.html">adfi_get</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">nedap_csv_data</span>, adg_res <span class="op">=</span> <span class="va">adg_results</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• There are no duplicate responders in different locations.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• Successfully generated the following 3 variables:</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;"> - FIV:feed intake per visit;</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;"> - OTV:occupation time per visit;</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;"> - FRV:feeding rate per visit;</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">• Successfully generated 10 error types from 3 variables:</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;"> - FIV-lo; FIV-hi; FIV-0; OTV-lo; OTV-hi; FRV-hi-FIV-lo; FRV-hi-strict; FRV-hi; FRV-0; FRV-lo;</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• Running linear mixed model with equation: </span></span></span>
<span><span class="co"><span style="color: #00BBBB;">#&gt; </span> dfi_right_part ~ otd_2 + otd_6 + otd_9 + otd_10 + otv_hi_p + frv_hi_fiv_lo_p + frv_lo_p + location + lm_slope + weight + (1 | responder)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">adfi_results</span><span class="op">$</span><span class="va">adfi_info</span><span class="op">)</span></span>
<span><span class="co">#&gt; Key: &lt;responder, location&gt;</span></span>
<span><span class="co">#&gt;    responder location test_days origin_dfi corrected_dfi</span></span>
<span><span class="co">#&gt;       &lt;char&gt;   &lt;char&gt;     &lt;int&gt;      &lt;num&gt;         &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:     13913      101        95   2562.365      2577.739</span></span>
<span><span class="co">#&gt; 2:     13918      101        96   2319.814      2305.710</span></span>
<span><span class="co">#&gt; 3:     13935      102        96   2703.371      2706.317</span></span>
<span><span class="co">#&gt; 4:     13954      101        95   2317.260      2308.288</span></span>
<span><span class="co">#&gt; 5:     13996      101        96   2909.309      2921.329</span></span>
<span><span class="co">#&gt; 6:     14260      102        96   2846.546      2819.889</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="fcr_get">fcr_get<a class="anchor" aria-label="anchor" href="#fcr_get"></a>
</h2>
<p>The <code><a href="../reference/fcr_get.html">fcr_get()</a></code> function computes feed conversion ratio
(FCR) by combining average daily gain (ADG) and daily feed intake (DFI)
data. It takes the output lists from <code><a href="../reference/adg_get.html">adg_get()</a></code> and
<code>dfi_get()</code> as input, merges the ADG and DFI summary
dataframes by pig ID and location, calculates FCR as corrected DFI
divided by ADG slope, and optionally adjusts FCR for a specified weight
range. The output is an FCR dataframe with pig ID, location, FCR, and
adjusted FCR if weight range is provided. To use it, supply the
<code><a href="../reference/adg_get.html">adg_get()</a></code> and <code>dfi_get()</code> result lists. It
handles merging the data, FCR calculation, and adjustment automatically.
This provides a streamlined workflow to go from raw feed intake data to
analyzed FCR estimates matched to ADG weight segments. The output FCR
metrics can then be used for evaluation and modeling of feed efficiency.
By combining ADG and DFI data, <code><a href="../reference/fcr_get.html">fcr_get()</a></code> enables easy
computation of the key FCR feed efficiency metric.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nedap_csv_data</span> <span class="op">&lt;-</span> <span class="fu">mintyr</span><span class="fu">::</span><span class="va"><a href="https://tony2015116.github.io/mintyr/reference/nedap.html" class="external-link">nedap</a></span></span>
<span><span class="va">adg_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adg_get.html">adg_get</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">nedap_csv_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• There are no duplicate responders in different locations.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• The removing of weight &lt; 15kg will not delete responder.</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">• Removing records of missing will delete responders: 1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">• Deleted responders: </span></span></span>
<span><span class="co"><span style="color: #BB0000;">#&gt;  c("15964")</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• Running RANSAC Robust Regression:</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• RANSAC Robust Regression succeeded!</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• The outliers detected by Robust model will not delete responder.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• All responders' begin_test_weight are less than or equal to 60kg.</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">• Removing end_test_weight &lt;85kg records will delete responders: 1</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">• Deleted responders: </span></span></span>
<span><span class="co"><span style="color: #BB0000;">#&gt;  c("15967")</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• Running Simple Linear Regression</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• Calculate ADG using Simple Linear Regression succeeded!</span></span></span>
<span><span class="va">adfi_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/adfi_get.html">adfi_get</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">nedap_csv_data</span>, adg_res <span class="op">=</span> <span class="va">adg_results</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• There are no duplicate responders in different locations.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• Successfully generated the following 3 variables:</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;"> - FIV:feed intake per visit;</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;"> - OTV:occupation time per visit;</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;"> - FRV:feeding rate per visit;</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">• Successfully generated 10 error types from 3 variables:</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;"> - FIV-lo; FIV-hi; FIV-0; OTV-lo; OTV-hi; FRV-hi-FIV-lo; FRV-hi-strict; FRV-hi; FRV-0; FRV-lo;</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">• Running linear mixed model with equation: </span></span></span>
<span><span class="co"><span style="color: #00BBBB;">#&gt; </span> dfi_right_part ~ otd_2 + otd_6 + otd_9 + otd_10 + otv_hi_p + frv_hi_fiv_lo_p + frv_lo_p + location + lm_slope + weight + (1 | responder)</span></span>
<span><span class="va">fcr_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fcr_get.html">fcr_get</a></span><span class="op">(</span>adg_res <span class="op">=</span> <span class="va">adg_results</span>, adfi_res <span class="op">=</span> <span class="va">adfi_results</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">fcr_results</span><span class="op">$</span><span class="va">fcr_res</span><span class="op">)</span></span>
<span><span class="co">#&gt; Key: &lt;responder, location&gt;</span></span>
<span><span class="co">#&gt;    responder location start_date_origin min_weight_origin end_date_origin</span></span>
<span><span class="co">#&gt;       &lt;char&gt;   &lt;char&gt;            &lt;Date&gt;             &lt;num&gt;          &lt;Date&gt;</span></span>
<span><span class="co">#&gt; 1:     13913      101        2024-02-19          21866.22      2024-05-25</span></span>
<span><span class="co">#&gt; 2:     13918      101        2024-02-19          16529.06      2024-05-25</span></span>
<span><span class="co">#&gt; 3:     13935      102        2024-02-19          21414.80      2024-05-25</span></span>
<span><span class="co">#&gt; 4:     13954      101        2024-02-20          30876.24      2024-05-25</span></span>
<span><span class="co">#&gt; 5:     13996      101        2024-02-19          22753.31      2024-05-25</span></span>
<span><span class="co">#&gt; 6:     14260      102        2024-02-19          27757.93      2024-05-25</span></span>
<span><span class="co">#&gt;    max_weight_origin r_squared  lm_slope test_days origin_dfi corrected_dfi</span></span>
<span><span class="co">#&gt;                &lt;num&gt;     &lt;num&gt;     &lt;num&gt;     &lt;int&gt;      &lt;num&gt;         &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:          132895.4 0.9914949 1180.5834        95   2562.365      2577.739</span></span>
<span><span class="co">#&gt; 2:          121102.8 0.9917870 1089.6744        96   2319.814      2305.710</span></span>
<span><span class="co">#&gt; 3:          138871.4 0.9976035 1233.5471        96   2703.371      2706.317</span></span>
<span><span class="co">#&gt; 4:          118602.7 0.9781564  941.2985        95   2317.260      2308.288</span></span>
<span><span class="co">#&gt; 5:          142956.6 0.9957625 1281.2277        96   2909.309      2921.329</span></span>
<span><span class="co">#&gt; 6:          142547.7 0.9962627 1221.0429        96   2846.546      2819.889</span></span>
<span><span class="co">#&gt;         fcr</span></span>
<span><span class="co">#&gt;       &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1: 2.183445</span></span>
<span><span class="co">#&gt; 2: 2.115962</span></span>
<span><span class="co">#&gt; 3: 2.193931</span></span>
<span><span class="co">#&gt; 4: 2.452238</span></span>
<span><span class="co">#&gt; 5: 2.280101</span></span>
<span><span class="co">#&gt; 6: 2.309410</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">fcr_results</span><span class="op">$</span><span class="va">fcr_summary</span><span class="op">)</span></span>
<span><span class="co">#&gt;               traits      N     min     max  median    mean     sd     cv</span></span>
<span><span class="co">#&gt;               &lt;char&gt; &lt;char&gt;  &lt;char&gt;  &lt;char&gt;  &lt;char&gt;  &lt;char&gt; &lt;char&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1: min_weight_origin     28    7.09   30.88   22.22   21.52   4.87 22.64%</span></span>
<span><span class="co">#&gt; 2: max_weight_origin     28  105.51  146.80  135.95  132.66  10.57  7.97%</span></span>
<span><span class="co">#&gt; 3:          lm_slope     28  907.51 1321.20 1203.42 1173.66 109.56  9.33%</span></span>
<span><span class="co">#&gt; 4:         test_days     28   95.00   96.00   96.00   95.68   0.48  0.50%</span></span>
<span><span class="co">#&gt; 5:        origin_dfi     28 1867.24 3361.74 2823.68 2739.91 357.71 13.06%</span></span>
<span><span class="co">#&gt; 6:     corrected_dfi     28 1878.89 3336.57 2817.39 2737.01 353.74 12.92%</span></span></code></pre></div>
<p>The <code><a href="../reference/import_csv.html">import_csv()</a></code> function provides easy importing and
consolidation of multiple CSV files, handling the repetitive workflow of
loading raw data files. The <code><a href="../reference/adg_get.html">adg_get()</a></code> function then
processes the imported data to calculate average daily gain over desired
weight ranges, with data cleaning, outlier detection and growth curve
plotting. Building on <code><a href="../reference/adg_get.html">adg_get()</a></code>, <code>dfi_get()</code>
focuses on visit feed intake data, correcting errors and computing daily
feed intake matched to ADG segments. Finally, <code><a href="../reference/fcr_get.html">fcr_get()</a></code>
combines the ADG and DFI results to efficiently compute the key feed
conversion ratio metric. Together these four functions provide a
streamlined workflow for analysis of pig feed efficiency from raw CSV
data to cleaned datasets, growth curves, ADG estimates, DFI calculations
and FCR metrics ready for downstream evaluation and modeling. By
encapsulating repetitive tasks like data import and cleaning, they allow
users to focus on analytical insights rather than coding details. The
output at each step can be customized based on analysis needs. These
interlocked functions enable easy end-to-end data wrangling and analysis
for pig feed intake data, facilitating efficient computation of ADG, DFI
and FCR feed efficiency indicators. That’s it ! This the end of the
documented story of our package.</p>
<!-- 

# Inflate your package

You're one inflate from paper to box.
Build your package from this very Rmd using `fusen::inflate()` 
-->
<!-- 
- Verify your `"DESCRIPTION"` file has been updated
- Verify your function is in `"R/"` directory
- Verify your test is in `"tests/testthat/"` directory
- Verify this Rmd appears in `"vignettes/"` directory 
-->
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Guo Meng.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
  <p class="preferably">Using <a href="https://preferably.amirmasoudabdol.name/?source=footer" class="external-link">preferably</a> template.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
